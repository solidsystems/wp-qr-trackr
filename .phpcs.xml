<?xml version="1.0"?>
<ruleset name="QR Trackr WordPress Coding Standards">
    <description>WordPress Coding Standards for QR Trackr plugin.</description>

    <config name="installed_paths" value="vendor/wp-coding-standards/wpcs"/>

    <rule ref="WordPress" />
    
    <!-- Exclude deprecated sniffs -->
    <exclude name="Generic.Functions.CallTimePassByReference" />
    
    <!-- Only lint these files/directories -->
    <file>wp-content/plugins/wp-qr-trackr/qr-trackr.php</file>
    <file>wp-content/plugins/wp-qr-trackr/includes/</file>
    
    <!-- Exclude patterns -->
    <exclude-pattern>assets/*.js</exclude-pattern>
    <exclude-pattern>assets/*.css</exclude-pattern>
    <exclude-pattern>coverage/_js/*.js</exclude-pattern>
    <exclude-pattern>coverage/_css/*.css</exclude-pattern>
    <exclude-pattern>*/vendor/*</exclude-pattern>
    <exclude-pattern>vendor/*</exclude-pattern>
    <exclude-pattern>**/vendor/*</exclude-pattern>
    <exclude-pattern>node_modules/*</exclude-pattern>
    <exclude-pattern>**/node_modules/*</exclude-pattern>
    <exclude-pattern>tests/plugin-test.php</exclude-pattern>
    <exclude-pattern>tests/MinimalTest.php</exclude-pattern>
    <exclude-pattern>bootstrap.php</exclude-pattern>
    <exclude-pattern>includes/class-qr-trackr-list-table.php</exclude-pattern>
    
    <!-- Ignore specific rules for admin/stats code -->
    <rule ref="WordPress.DB.DirectDatabaseQuery.DirectQuery">
        <exclude-pattern>includes/module-admin.php</exclude-pattern>
        <exclude-pattern>includes/module-rewrite.php</exclude-pattern>
        <exclude-pattern>includes/module-ajax.php</exclude-pattern>
    </rule>
    <!-- Exclude false positives for table assignments in module-admin.php -->
    <rule ref="WordPress.DB.PreparedSQL.InterpolatedNotPrepared">
        <exclude-pattern>includes/module-admin.php</exclude-pattern>
        <exclude-pattern>wp-content/plugins/wp-qr-trackr/includes/module-admin.php</exclude-pattern>
        <exclude-pattern>**/module-admin.php</exclude-pattern>
    </rule>
</ruleset> 